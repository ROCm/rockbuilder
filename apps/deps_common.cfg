[app_info]
APP_NAME=deps_common

CMD_EXEC_DIR=${RCB_APP_BUILD_DIR}

CMD_INSTALL = pip install pybind11 "cmake<4.0" ninja matplotlib pandas huggingface_hub

CMD_POST_INSTALL_LINUX=echo "export ROCM_HOME=${ROCM_HOME}" > ${ROCM_HOME}/bin/init_env_rocm.sh
                 echo "export ROCM_PATH=${ROCM_HOME}" >> ${ROCM_HOME}/bin/init_env_rocm.sh
                 echo "export DEVICE_LIB_PATH=${DEVICE_LIB_PATH}" >> ${ROCM_HOME}/bin/init_env_rocm.sh
                 echo "export HIP_DEVICE_LIB_PATH=${HIP_DEVICE_LIB_PATH}" >> ${ROCM_HOME}/bin/init_env_rocm.sh
                 echo "export PATH=${ROCM_HOME}/bin:${CLANG_BIN_DIR}:s${PATH}" >> ${ROCM_HOME}/bin/init_env_rocm.sh
                 echo "export LD_LIBRARY_PATH=${ROCM_HOME}/lib:${CLANG_LIB_DIR}" >> ${ROCM_HOME}/bin/init_env_rocm.sh
                 echo "export TRITON_HIP_LLD_PATH=${ROCM_HOME}/lib/llvm/bin/ld.lld" >> ${ROCM_HOME}/bin/init_env_rocm.sh

CMD_POST_INSTALL_WINDOWS=setlocal
                 echo set "ROCM_HOME=$ROCM_HOME" > $ROCM_HOME\bin\init_env_rocm.bat
                 echo set "ROCM_PATH=$ROCM_PATH" >> $ROCM_HOME\bin\init_env_rocm.bat
                 echo set "DEVICE_LIB_PATH=$DEVICE_LIB_PATH" >> $ROCM_HOME\bin\init_env_rocm.bat
                 echo set "HIP_DEVICE_LIB_PATH=$HIP_DEVICE_LIB_PATH" >> $ROCM_HOME\bin\init_env_rocm.bat
                 echo set "PATH=$ROCM_HOME\bin;$CLANG_BIN_DIR;$CLANG_LIB_DIR;$PATH" >> $ROCM_HOME\bin\init_env_rocm.bat
                 echo set "TRITON_HIP_LLD_PATH=$ROCM_HOME\lib\llvm\bin\ld.lld" >> $ROCM_HOME\bin\init_env_rocm.bat
                 endlocal
