From 941d390015d572ec43f35f7f37de97df789e9a5f Mon Sep 17 00:00:00 2001
From: Mika Laitio <mika.laitio@amd.com>
Date: Tue, 16 Sep 2025 17:02:28 -0700
Subject: [PATCH 1/5] helper scripts to init and config therock

Signed-off-by: Mika Laitio <mika.laitio@amd.com>
---
 rcb_build.bat  |  8 ++++++++
 rcb_build.sh   |  4 ++++
 rcb_config.bat |  8 ++++++++
 rcb_config.sh  |  4 ++++
 rcb_init.bat   | 24 ++++++++++++++++++++++++
 rcb_init.sh    |  7 +++++++
 6 files changed, 55 insertions(+)
 create mode 100644 rcb_build.bat
 create mode 100644 rcb_build.sh
 create mode 100644 rcb_config.bat
 create mode 100755 rcb_config.sh
 create mode 100644 rcb_init.bat
 create mode 100755 rcb_init.sh

diff --git a/rcb_build.bat b/rcb_build.bat
new file mode 100644
index 0000000..a2fd930
--- /dev/null
+++ b/rcb_build.bat
@@ -0,0 +1,8 @@
+set "VENV_NAME=.venv"
+set "SCRIPT_DIR=%~dp0"
+
+cd /d "%SCRIPT_DIR%"
+
+echo Activating python virtual environment: "%VENV_NAME%"
+call "%VENV_NAME%\Scripts\activate.bat"
+cmake --build build
diff --git a/rcb_build.sh b/rcb_build.sh
new file mode 100644
index 0000000..90e6e40
--- /dev/null
+++ b/rcb_build.sh
@@ -0,0 +1,4 @@
+#!/bin/bash
+
+source ./.venv/bin/activate
+cmake --build build
diff --git a/rcb_config.bat b/rcb_config.bat
new file mode 100644
index 0000000..39e807c
--- /dev/null
+++ b/rcb_config.bat
@@ -0,0 +1,8 @@
+set "VENV_NAME=.venv"
+set "SCRIPT_DIR=%~dp0"
+
+cd /d "%SCRIPT_DIR%"
+
+echo Activating python virtual environment: "%VENV_NAME%"
+call "%VENV_NAME%\Scripts\activate.bat"
+cmake -B build -GNinja -DTHEROCK_AMDGPU_TARGETS=%RCB_AMDGPU_TARGETS% .
diff --git a/rcb_config.sh b/rcb_config.sh
new file mode 100755
index 0000000..09526f7
--- /dev/null
+++ b/rcb_config.sh
@@ -0,0 +1,4 @@
+#!/bin/bash
+
+source ./.venv/bin/activate
+cmake -B build -GNinja -DTHEROCK_AMDGPU_TARGETS=${RCB_AMDGPU_TARGETS} .
diff --git a/rcb_init.bat b/rcb_init.bat
new file mode 100644
index 0000000..cd7dd93
--- /dev/null
+++ b/rcb_init.bat
@@ -0,0 +1,24 @@
+set "VENV_NAME=.venv"
+set "SCRIPT_DIR=%~dp0"
+
+cd /d "%SCRIPT_DIR%"
+
+if not exist "%VENV_NAME%\Scripts\activate.bat" (
+    echo Creating python virtual environment: "%VENV_NAME%"
+    python -m venv "%VENV_NAME%"
+    if errorlevel 1 (
+        echo Error: Failed to create python virtual environment. Exiting.
+        exit /b 1
+    )
+    echo Activating python virtual environment: "%VENV_NAME%"
+    call "%VENV_NAME%\Scripts\activate.bat"
+    python.exe -m pip install --upgrade pip
+    pip install -r requirements.txt
+    pip install windows-curses
+    echo Python virtual environment created and enabled: "%VENV_NAME%"
+) else (
+    call "%VENV_NAME%\Scripts\activate.bat"
+    echo Python virtual environment enabled: "%VENV_NAME%"
+)
+pip install "dvc[s3]"
+python ./build_tools/fetch_sources.py
diff --git a/rcb_init.sh b/rcb_init.sh
new file mode 100755
index 0000000..9e07727
--- /dev/null
+++ b/rcb_init.sh
@@ -0,0 +1,7 @@
+#!/bin/bash
+
+python3 -m venv ./.venv && source ./.venv/bin/activate
+pip install --upgrade pip
+pip install -r ./requirements.txt
+pip install "dvc[s3]"
+python ./build_tools/fetch_sources.py
-- 
2.41.3

