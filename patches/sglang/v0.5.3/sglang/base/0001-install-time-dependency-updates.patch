From b166bed7d60b848d97137d270bd811cf29d599c3 Mon Sep 17 00:00:00 2001
From: Mika Laitio <mika.laitio@amd.com>
Date: Wed, 8 Oct 2025 15:35:04 -0700
Subject: [PATCH 1/2] install time dependency updates

Signed-off-by: Mika Laitio <mika.laitio@amd.com>
---
 python/pyproject.toml     |  6 ++++--
 sgl-kernel/pyproject.toml | 13 +++----------
 2 files changed, 7 insertions(+), 12 deletions(-)

diff --git a/python/pyproject.toml b/python/pyproject.toml
index ddd33dc..777c361 100755
--- a/python/pyproject.toml
+++ b/python/pyproject.toml
@@ -57,10 +57,10 @@ dependencies = [
   "soundfile==0.13.1",
   "tiktoken",
   "timm==1.0.16",
-  "torch==2.8.0",
+  "torch",
   "torch_memory_saver==0.0.9rc2",
   "torchao==0.9.0",
-  "torchaudio==2.8.0",
+  "torchaudio",
   "torchvision",
   "tqdm",
   "transformers==4.57.0",
@@ -71,6 +71,8 @@ dependencies = [
   "grpcio-tools==1.75.1" # keep it align with compile_proto.py
 ]
 
+# transformers patch is for vllm versions < 0.10.0, see: https://github.com/vllm-project/vllm-ascend/issues/2046
+# xgrammar 0.1.22 is not compatible with vllm 0.6.x warning fix
 [project.optional-dependencies]
 decord = ["decord"]
 test = [
diff --git a/sgl-kernel/pyproject.toml b/sgl-kernel/pyproject.toml
index 96a88c4..e4345cd 100644
--- a/sgl-kernel/pyproject.toml
+++ b/sgl-kernel/pyproject.toml
@@ -1,10 +1,11 @@
 [build-system]
 requires = [
+  "setuptools>=75.0",
   "scikit-build-core>=0.10",
-  "torch>=2.8.0",
+  "torch",
   "wheel",
 ]
-build-backend = "scikit_build_core.build"
+build-backend = "setuptools.build_meta"
 
 [project]
 name = "sgl-kernel"
@@ -29,11 +30,3 @@ exclude = [
   "dist*",
   "tests*",
 ]
-
-[tool.scikit-build]
-cmake.build-type = "Release"
-minimum-version = "build-system.requires"
-
-wheel.py-api = "cp310"
-wheel.license-files = []
-wheel.packages = ["python/sgl_kernel"]
-- 
2.43.0

